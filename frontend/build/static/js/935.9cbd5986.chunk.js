"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[935],{935:(t,e,s)=>{s.d(e,{musicAPI:()=>n,pollMusicStatus:()=>o});const a="https://a9c62eca-b513-4033-a492-2bc050ebfe45.preview.emergentagent.com",n={generateMusic:async t=>{const e=await fetch("".concat(a,"/api/music/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:t.prompt,title:t.title,tags:t.genre,make_instrumental:t.instrumental||!1,user_id:t.userId||"default_user"})});if(!e.ok){const t=await e.json();throw new Error(t.detail||"Failed to generate music")}return e.json()},checkMusicStatus:async t=>{const e=await fetch("".concat(a,"/api/music/status/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok){const t=await e.json();throw new Error(t.detail||"Failed to check music status")}return e.json()},getUserMusic:async t=>{const e=await fetch("".concat(a,"/api/music/user/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok){const t=await e.json();throw new Error(t.detail||"Failed to fetch user music")}return e.json()}},o=async function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,a=0;for(;a<s;)try{const s=await n.checkMusicStatus(t);if(e&&e(s),"completed"===s.status)return s;if("failed"===s.status)throw new Error("Music generation failed");await new Promise((t=>setTimeout(t,5e3))),a++}catch(o){console.error("Error polling music status:",o),a++,await new Promise((t=>setTimeout(t,5e3)))}throw new Error("Music generation timed out")}}}]);
//# sourceMappingURL=935.9cbd5986.chunk.js.map